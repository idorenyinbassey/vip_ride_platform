# Generated by Django 5.2.5 on 2025-08-08 16:15

import django.core.validators
import django.db.models.deletion
import uuid
from decimal import Decimal
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.CreateModel(
            name='Hotel',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('name', models.CharField(max_length=200)),
                ('brand', models.CharField(blank=True, max_length=100)),
                ('tier', models.CharField(choices=[('STANDARD', 'Standard'), ('PREMIUM', 'Premium'), ('LUXURY', 'Luxury')], default='STANDARD', max_length=20)),
                ('status', models.CharField(choices=[('ACTIVE', 'Active'), ('INACTIVE', 'Inactive'), ('SUSPENDED', 'Suspended'), ('PENDING', 'Pending Approval')], default='PENDING', max_length=20)),
                ('address', models.TextField()),
                ('city', models.CharField(max_length=100)),
                ('state', models.CharField(max_length=100)),
                ('country', models.CharField(default='Nigeria', max_length=100)),
                ('latitude', models.DecimalField(blank=True, decimal_places=6, max_digits=9, null=True)),
                ('longitude', models.DecimalField(blank=True, decimal_places=6, max_digits=9, null=True)),
                ('phone', models.CharField(max_length=20)),
                ('email', models.EmailField(max_length=254)),
                ('website', models.URLField(blank=True)),
                ('star_rating', models.IntegerField(blank=True, null=True, validators=[django.core.validators.MinValueValidator(1), django.core.validators.MaxValueValidator(5)])),
                ('total_rooms', models.PositiveIntegerField()),
                ('commission_rate', models.DecimalField(decimal_places=2, default=Decimal('12.50'), help_text='Commission rate percentage (5-25%)', max_digits=5, validators=[django.core.validators.MinValueValidator(5.0), django.core.validators.MaxValueValidator(25.0)])),
                ('minimum_monthly_bookings', models.PositiveIntegerField(default=10)),
                ('preferred_vehicle_types', models.JSONField(default=list, help_text="List of preferred vehicle types: ['ECONOMY', 'COMFORT', 'LUXURY', 'VAN']")),
                ('pms_type', models.CharField(choices=[('ORACLE_OPERA', 'Oracle Opera'), ('FIDELIO', 'Fidelio Suite 8'), ('PROTEL', 'Protel Hotel Management'), ('CLOUDBEDS', 'CloudBeds'), ('MEWS', 'Mews'), ('HOTELOGIX', 'Hotelogix'), ('CUSTOM', 'Custom System'), ('NONE', 'No PMS Integration')], default='NONE', max_length=20)),
                ('pms_endpoint', models.URLField(blank=True, help_text='PMS API endpoint for integration')),
                ('pms_api_key', models.CharField(blank=True, max_length=500)),
                ('pms_webhook_secret', models.CharField(blank=True, max_length=200)),
                ('auto_assign_rides', models.BooleanField(default=True)),
                ('send_real_time_updates', models.BooleanField(default=True)),
                ('allow_bulk_bookings', models.BooleanField(default=True)),
                ('guest_booking_enabled', models.BooleanField(default=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('onboarded_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='onboarded_hotels', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'ordering': ['name'],
            },
        ),
        migrations.CreateModel(
            name='HotelCommissionReport',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('report_month', models.DateField(help_text='First day of the month being reported')),
                ('total_bookings', models.PositiveIntegerField(default=0)),
                ('completed_bookings', models.PositiveIntegerField(default=0)),
                ('cancelled_bookings', models.PositiveIntegerField(default=0)),
                ('total_ride_value', models.DecimalField(decimal_places=2, default=0, max_digits=12)),
                ('total_commission_earned', models.DecimalField(decimal_places=2, default=0, max_digits=10)),
                ('average_commission_rate', models.DecimalField(decimal_places=2, default=0, max_digits=5)),
                ('average_rating', models.DecimalField(blank=True, decimal_places=2, max_digits=3, null=True)),
                ('response_time_avg', models.DurationField(blank=True, null=True)),
                ('status', models.CharField(choices=[('PENDING', 'Pending'), ('APPROVED', 'Approved'), ('PAID', 'Paid'), ('DISPUTED', 'Disputed')], default='PENDING', max_length=15)),
                ('payment_due_date', models.DateField(blank=True, null=True)),
                ('payment_made_date', models.DateField(blank=True, null=True)),
                ('payment_reference', models.CharField(blank=True, max_length=100)),
                ('detailed_data', models.JSONField(default=dict, help_text='Detailed breakdown of bookings')),
                ('generated_at', models.DateTimeField(auto_now_add=True)),
                ('generated_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='generated_commission_reports', to=settings.AUTH_USER_MODEL)),
                ('hotel', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='commission_reports', to='hotel_partnerships.hotel')),
            ],
            options={
                'ordering': ['-report_month'],
            },
        ),
        migrations.CreateModel(
            name='HotelRoom',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('room_number', models.CharField(max_length=20)),
                ('room_type', models.CharField(choices=[('STANDARD', 'Standard Room'), ('DELUXE', 'Deluxe Room'), ('SUITE', 'Suite'), ('EXECUTIVE', 'Executive Room'), ('PRESIDENTIAL', 'Presidential Suite'), ('VILLA', 'Villa')], max_length=20)),
                ('floor', models.PositiveIntegerField()),
                ('capacity', models.PositiveIntegerField(default=2)),
                ('amenities', models.JSONField(default=list, help_text='List of room amenities')),
                ('has_balcony', models.BooleanField(default=False)),
                ('has_kitchenette', models.BooleanField(default=False)),
                ('status', models.CharField(choices=[('AVAILABLE', 'Available'), ('OCCUPIED', 'Occupied'), ('MAINTENANCE', 'Under Maintenance'), ('OUT_OF_ORDER', 'Out of Order')], default='AVAILABLE', max_length=15)),
                ('base_rate', models.DecimalField(blank=True, decimal_places=2, max_digits=10, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('hotel', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='rooms', to='hotel_partnerships.hotel')),
            ],
            options={
                'ordering': ['hotel', 'floor', 'room_number'],
            },
        ),
        migrations.CreateModel(
            name='HotelGuest',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('first_name', models.CharField(max_length=100)),
                ('last_name', models.CharField(max_length=100)),
                ('email', models.EmailField(blank=True, max_length=254)),
                ('phone', models.CharField(max_length=20)),
                ('guest_type', models.CharField(choices=[('INDIVIDUAL', 'Individual Guest'), ('CORPORATE', 'Corporate Guest'), ('GROUP', 'Group Leader'), ('VIP', 'VIP Guest')], default='INDIVIDUAL', max_length=15)),
                ('check_in_date', models.DateField()),
                ('check_out_date', models.DateField()),
                ('number_of_guests', models.PositiveIntegerField(default=1)),
                ('preferred_vehicle_type', models.CharField(blank=True, max_length=20)),
                ('special_requests', models.TextField(blank=True)),
                ('loyalty_number', models.CharField(blank=True, max_length=50)),
                ('pms_guest_id', models.CharField(blank=True, help_text='Guest ID in hotel PMS', max_length=100)),
                ('pms_reservation_id', models.CharField(blank=True, max_length=100)),
                ('is_checked_in', models.BooleanField(default=False)),
                ('is_vip', models.BooleanField(default=False)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('hotel', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='guests', to='hotel_partnerships.hotel')),
                ('room', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='current_guests', to='hotel_partnerships.hotelroom')),
            ],
            options={
                'ordering': ['-check_in_date'],
            },
        ),
        migrations.CreateModel(
            name='HotelStaff',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('role', models.CharField(choices=[('ADMIN', 'Hotel Administrator'), ('MANAGER', 'General Manager'), ('CONCIERGE', 'Concierge'), ('FRONT_DESK', 'Front Desk'), ('TRANSPORT_COORD', 'Transport Coordinator'), ('GUEST_SERVICES', 'Guest Services')], max_length=20)),
                ('permission_level', models.CharField(choices=[('FULL', 'Full Access'), ('BOOKING_ONLY', 'Booking Only'), ('VIEW_ONLY', 'View Only')], default='BOOKING_ONLY', max_length=15)),
                ('department', models.CharField(blank=True, max_length=100)),
                ('employee_id', models.CharField(blank=True, max_length=50)),
                ('phone', models.CharField(max_length=20)),
                ('extension', models.CharField(blank=True, max_length=10)),
                ('is_active', models.BooleanField(default=True)),
                ('last_login', models.DateTimeField(blank=True, null=True)),
                ('login_attempts', models.PositiveIntegerField(default=0)),
                ('locked_until', models.DateTimeField(blank=True, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='created_hotel_staff', to=settings.AUTH_USER_MODEL)),
                ('hotel', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='staff', to='hotel_partnerships.hotel')),
                ('user', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='hotel_staff', to=settings.AUTH_USER_MODEL)),
            ],
        ),
        migrations.CreateModel(
            name='HotelBooking',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('booking_type', models.CharField(choices=[('GUEST_REQUEST', 'Guest Request'), ('CONCIERGE', 'Concierge Booking'), ('FRONT_DESK', 'Front Desk'), ('BULK_EVENT', 'Bulk Event'), ('AIRPORT_TRANSFER', 'Airport Transfer'), ('TOUR', 'Tour/Excursion')], max_length=20)),
                ('booking_reference', models.CharField(max_length=50, unique=True)),
                ('guest_name', models.CharField(help_text='Guest name if not in system', max_length=200)),
                ('guest_phone', models.CharField(max_length=20)),
                ('guest_room_number', models.CharField(blank=True, max_length=20)),
                ('pickup_location', models.TextField()),
                ('pickup_latitude', models.DecimalField(blank=True, decimal_places=6, max_digits=9, null=True)),
                ('pickup_longitude', models.DecimalField(blank=True, decimal_places=6, max_digits=9, null=True)),
                ('destination', models.TextField()),
                ('destination_latitude', models.DecimalField(blank=True, decimal_places=6, max_digits=9, null=True)),
                ('destination_longitude', models.DecimalField(blank=True, decimal_places=6, max_digits=9, null=True)),
                ('pickup_datetime', models.DateTimeField()),
                ('estimated_duration', models.DurationField(blank=True, null=True)),
                ('vehicle_type', models.CharField(default='ECONOMY', max_length=20)),
                ('passenger_count', models.PositiveIntegerField(default=1)),
                ('special_instructions', models.TextField(blank=True)),
                ('estimated_fare', models.DecimalField(blank=True, decimal_places=2, max_digits=10, null=True)),
                ('final_fare', models.DecimalField(blank=True, decimal_places=2, max_digits=10, null=True)),
                ('hotel_commission', models.DecimalField(blank=True, decimal_places=2, max_digits=10, null=True)),
                ('commission_rate_used', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True)),
                ('status', models.CharField(choices=[('PENDING', 'Pending'), ('CONFIRMED', 'Confirmed'), ('ASSIGNED', 'Driver Assigned'), ('IN_PROGRESS', 'In Progress'), ('COMPLETED', 'Completed'), ('CANCELLED', 'Cancelled'), ('NO_SHOW', 'No Show')], default='PENDING', max_length=15)),
                ('priority', models.CharField(choices=[('LOW', 'Low'), ('NORMAL', 'Normal'), ('HIGH', 'High'), ('URGENT', 'Urgent')], default='NORMAL', max_length=10)),
                ('ride_id', models.UUIDField(blank=True, help_text='Reference to main ride booking', null=True)),
                ('driver_assigned', models.JSONField(blank=True, help_text='Driver details', null=True)),
                ('status_updates', models.JSONField(default=list, help_text='Status update history')),
                ('last_update_sent', models.DateTimeField(blank=True, null=True)),
                ('event_name', models.CharField(blank=True, max_length=200)),
                ('bulk_booking_group', models.UUIDField(blank=True, help_text='Groups bulk bookings', null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('completed_at', models.DateTimeField(blank=True, null=True)),
                ('hotel', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='bookings', to='hotel_partnerships.hotel')),
                ('guest', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='ride_bookings', to='hotel_partnerships.hotelguest')),
                ('booked_by_staff', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='bookings_made', to='hotel_partnerships.hotelstaff')),
            ],
            options={
                'ordering': ['-pickup_datetime'],
            },
        ),
        migrations.CreateModel(
            name='BulkBookingEvent',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('event_name', models.CharField(max_length=200)),
                ('event_type', models.CharField(choices=[('CONFERENCE', 'Conference'), ('WEDDING', 'Wedding'), ('CORPORATE', 'Corporate Event'), ('SPORTS', 'Sports Event'), ('ENTERTAINMENT', 'Entertainment'), ('EXHIBITION', 'Exhibition'), ('OTHER', 'Other')], max_length=15)),
                ('description', models.TextField(blank=True)),
                ('event_date', models.DateField()),
                ('start_time', models.TimeField()),
                ('end_time', models.TimeField()),
                ('expected_guests', models.PositiveIntegerField()),
                ('pickup_locations', models.JSONField(default=list, help_text='List of pickup locations')),
                ('destination_venue', models.TextField()),
                ('vehicle_types_needed', models.JSONField(default=list)),
                ('estimated_rides', models.PositiveIntegerField()),
                ('special_requirements', models.TextField(blank=True)),
                ('event_coordinator_name', models.CharField(max_length=200)),
                ('event_coordinator_phone', models.CharField(max_length=20)),
                ('event_coordinator_email', models.EmailField(max_length=254)),
                ('status', models.CharField(choices=[('PLANNING', 'Planning'), ('CONFIRMED', 'Confirmed'), ('IN_PROGRESS', 'In Progress'), ('COMPLETED', 'Completed'), ('CANCELLED', 'Cancelled')], default='PLANNING', max_length=15)),
                ('estimated_total_cost', models.DecimalField(blank=True, decimal_places=2, max_digits=12, null=True)),
                ('actual_total_cost', models.DecimalField(blank=True, decimal_places=2, max_digits=12, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('hotel', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='bulk_events', to='hotel_partnerships.hotel')),
                ('created_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='created_bulk_events', to='hotel_partnerships.hotelstaff')),
            ],
            options={
                'ordering': ['-event_date'],
            },
        ),
        migrations.CreateModel(
            name='PMSIntegrationLog',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('action_type', models.CharField(choices=[('GUEST_SYNC', 'Guest Data Sync'), ('BOOKING_CREATE', 'Booking Creation'), ('STATUS_UPDATE', 'Status Update'), ('COMMISSION_SYNC', 'Commission Sync'), ('WEBHOOK_RECEIVED', 'Webhook Received'), ('ERROR', 'Error Occurred')], max_length=20)),
                ('success', models.BooleanField(default=True)),
                ('request_data', models.JSONField(blank=True, null=True)),
                ('response_data', models.JSONField(blank=True, null=True)),
                ('error_message', models.TextField(blank=True)),
                ('booking_reference', models.CharField(blank=True, max_length=50)),
                ('pms_reference', models.CharField(blank=True, max_length=100)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('processing_time', models.DurationField(blank=True, null=True)),
                ('hotel', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='pms_logs', to='hotel_partnerships.hotel')),
            ],
            options={
                'ordering': ['-created_at'],
            },
        ),
        migrations.AddIndex(
            model_name='hotel',
            index=models.Index(fields=['status', 'tier'], name='hotel_partn_status_288fa2_idx'),
        ),
        migrations.AddIndex(
            model_name='hotel',
            index=models.Index(fields=['city', 'state'], name='hotel_partn_city_ee5254_idx'),
        ),
        migrations.AddIndex(
            model_name='hotel',
            index=models.Index(fields=['created_at'], name='hotel_partn_created_29457a_idx'),
        ),
        migrations.AddIndex(
            model_name='hotelcommissionreport',
            index=models.Index(fields=['hotel', 'status'], name='hotel_partn_hotel_i_9a5567_idx'),
        ),
        migrations.AddIndex(
            model_name='hotelcommissionreport',
            index=models.Index(fields=['report_month'], name='hotel_partn_report__e1dff5_idx'),
        ),
        migrations.AddIndex(
            model_name='hotelcommissionreport',
            index=models.Index(fields=['status', 'payment_due_date'], name='hotel_partn_status_0e008e_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='hotelcommissionreport',
            unique_together={('hotel', 'report_month')},
        ),
        migrations.AddIndex(
            model_name='hotelroom',
            index=models.Index(fields=['hotel', 'status'], name='hotel_partn_hotel_i_e501bb_idx'),
        ),
        migrations.AddIndex(
            model_name='hotelroom',
            index=models.Index(fields=['room_type', 'status'], name='hotel_partn_room_ty_9db637_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='hotelroom',
            unique_together={('hotel', 'room_number')},
        ),
        migrations.AddIndex(
            model_name='hotelguest',
            index=models.Index(fields=['hotel', 'is_checked_in'], name='hotel_partn_hotel_i_e45301_idx'),
        ),
        migrations.AddIndex(
            model_name='hotelguest',
            index=models.Index(fields=['check_in_date', 'check_out_date'], name='hotel_partn_check_i_59bc8a_idx'),
        ),
        migrations.AddIndex(
            model_name='hotelguest',
            index=models.Index(fields=['email'], name='hotel_partn_email_3e6cb3_idx'),
        ),
        migrations.AddIndex(
            model_name='hotelguest',
            index=models.Index(fields=['pms_guest_id'], name='hotel_partn_pms_gue_13f84f_idx'),
        ),
        migrations.AddIndex(
            model_name='hotelstaff',
            index=models.Index(fields=['hotel', 'is_active'], name='hotel_partn_hotel_i_98adb9_idx'),
        ),
        migrations.AddIndex(
            model_name='hotelstaff',
            index=models.Index(fields=['role', 'permission_level'], name='hotel_partn_role_bac41e_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='hotelstaff',
            unique_together={('hotel', 'user')},
        ),
        migrations.AddIndex(
            model_name='hotelbooking',
            index=models.Index(fields=['hotel', 'status'], name='hotel_partn_hotel_i_d28552_idx'),
        ),
        migrations.AddIndex(
            model_name='hotelbooking',
            index=models.Index(fields=['pickup_datetime'], name='hotel_partn_pickup__e35285_idx'),
        ),
        migrations.AddIndex(
            model_name='hotelbooking',
            index=models.Index(fields=['booking_reference'], name='hotel_partn_booking_f24365_idx'),
        ),
        migrations.AddIndex(
            model_name='hotelbooking',
            index=models.Index(fields=['guest', 'status'], name='hotel_partn_guest_i_0f2537_idx'),
        ),
        migrations.AddIndex(
            model_name='hotelbooking',
            index=models.Index(fields=['bulk_booking_group'], name='hotel_partn_bulk_bo_906a30_idx'),
        ),
        migrations.AddIndex(
            model_name='hotelbooking',
            index=models.Index(fields=['created_at'], name='hotel_partn_created_d5fe60_idx'),
        ),
        migrations.AddIndex(
            model_name='bulkbookingevent',
            index=models.Index(fields=['hotel', 'status'], name='hotel_partn_hotel_i_ee6602_idx'),
        ),
        migrations.AddIndex(
            model_name='bulkbookingevent',
            index=models.Index(fields=['event_date'], name='hotel_partn_event_d_d3c4f1_idx'),
        ),
        migrations.AddIndex(
            model_name='bulkbookingevent',
            index=models.Index(fields=['event_type', 'status'], name='hotel_partn_event_t_ca7c19_idx'),
        ),
        migrations.AddIndex(
            model_name='pmsintegrationlog',
            index=models.Index(fields=['hotel', 'action_type'], name='hotel_partn_hotel_i_16cc4c_idx'),
        ),
        migrations.AddIndex(
            model_name='pmsintegrationlog',
            index=models.Index(fields=['success', 'created_at'], name='hotel_partn_success_a14b3a_idx'),
        ),
        migrations.AddIndex(
            model_name='pmsintegrationlog',
            index=models.Index(fields=['booking_reference'], name='hotel_partn_booking_ffadd0_idx'),
        ),
    ]
